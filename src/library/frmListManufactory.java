/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package library;

import Function.Display;
import Function.QueryGeneral;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author Admin
 */
public class frmListManufactory extends javax.swing.JFrame {

    /**
     * Creates new form frmListManufactory
     */
    QueryGeneral objQG;
    DefaultTableModel dtm;
    DefaultTableModel dtmDetailOrder;
    DefaultTableModel dtmViewDetail;
    String manuID;
    Connection conn;
    String[] manuInfo = new String[6];
    String detailOrderID;
    boolean bPermission;
    String idUpdate;
    
    public frmListManufactory() {
        initComponents();
        dtm = (DefaultTableModel) tblListManu.getModel();
        dtmDetailOrder = (DefaultTableModel) tblDetailOrder.getModel();
        dtmViewDetail = (DefaultTableModel) tblViewDetail.getModel();
        
        try {
            DriverManager.registerDriver(new com.microsoft.sqlserver.jdbc.SQLServerDriver());
            String dbURL = "jdbc:sqlserver://localhost:1433;databaseName=Library";
            this.conn = DriverManager.getConnection(dbURL, "sa", "sa");
            //System.out.println(""+conn);
            
        } catch (SQLException ex) {
            System.out.println(""+ex.toString());
            
        }
        objQG = new QueryGeneral();
        
            objQG.setConn(conn);
            objQG.setTable("Manufactory");
            ResultSet rsBook;
            
            rsBook = objQG.selectQuery();
            ResultSet rsBookTemp;
            rsBookTemp = objQG.selectQuery();
            int countTemp = 0;
            try {
                while(rsBookTemp.next())
                {
                    countTemp++;
                }
            } catch (SQLException ex) {
                Logger.getLogger(frmOrderBook.class.getName()).log(Level.SEVERE, null, ex);
            }
            String[][] sqlData = new String[countTemp][6];
            String[] listCol = new String[]{"ManuID", "ManuName", "ManuAddress", "ManuPhone","ManuEmail", "ManuContact"};
            String[] listType = new String[]{"String", "String", "String", "String","String", "String"};
            Display objDisplay = new Display(listCol);
            sqlData = objDisplay.getData(rsBook, listType, countTemp, 6);
            for(int i = 0; i<countTemp;i++)
            {
                dtm.addRow(sqlData[i]);
            }
            
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        frmEdit = new javax.swing.JFrame();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        txtID = new javax.swing.JTextField();
        txtName = new javax.swing.JTextField();
        txtAddress = new javax.swing.JTextField();
        txtPhone = new javax.swing.JTextField();
        txtEmail = new javax.swing.JTextField();
        txtContact = new javax.swing.JTextField();
        btnOK = new javax.swing.JButton();
        frmDetail = new javax.swing.JFrame();
        jPanel1 = new javax.swing.JPanel();
        jLabel7 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        txtDetailAddress = new javax.swing.JTextField();
        txtDetailName = new javax.swing.JTextField();
        txtDetailID = new javax.swing.JTextField();
        txtDetailEmail = new javax.swing.JTextField();
        txtDetailPhone = new javax.swing.JTextField();
        txtDetailContact = new javax.swing.JTextField();
        jLabel10 = new javax.swing.JLabel();
        jLabel11 = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        jLabel13 = new javax.swing.JLabel();
        jScrollPane2 = new javax.swing.JScrollPane();
        tblDetailOrder = new javax.swing.JTable();
        btnDetailOK = new javax.swing.JButton();
        btnViewDetail = new javax.swing.JButton();
        btnApproveOrder = new javax.swing.JButton();
        frmViewDetail = new javax.swing.JFrame();
        jLabel14 = new javax.swing.JLabel();
        jLabel15 = new javax.swing.JLabel();
        lblOrderID = new javax.swing.JLabel();
        jScrollPane3 = new javax.swing.JScrollPane();
        tblViewDetail = new javax.swing.JTable();
        btnViewDetailOK = new javax.swing.JButton();
        jLabel16 = new javax.swing.JLabel();
        lblNum = new javax.swing.JLabel();
        jLabel18 = new javax.swing.JLabel();
        lblPrice = new javax.swing.JLabel();
        btnAdd = new javax.swing.JButton();
        btnEdit = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        tblListManu = new javax.swing.JTable();
        btnDetail = new javax.swing.JButton();

        frmEdit.addComponentListener(new java.awt.event.ComponentAdapter() {
            public void componentShown(java.awt.event.ComponentEvent evt) {
                frmEditComponentShown(evt);
            }
        });

        jLabel1.setText("ID");

        jLabel2.setText("Name");

        jLabel3.setText("Address");

        jLabel4.setText("Phone");

        jLabel5.setText("Email");

        jLabel6.setText("Contact");

        txtID.setEditable(false);

        btnOK.setText("OK");
        btnOK.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnOKActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout frmEditLayout = new javax.swing.GroupLayout(frmEdit.getContentPane());
        frmEdit.getContentPane().setLayout(frmEditLayout);
        frmEditLayout.setHorizontalGroup(
            frmEditLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(frmEditLayout.createSequentialGroup()
                .addGroup(frmEditLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(frmEditLayout.createSequentialGroup()
                        .addGap(31, 31, 31)
                        .addGroup(frmEditLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel6)
                            .addComponent(jLabel5)
                            .addComponent(jLabel4)
                            .addComponent(jLabel3)
                            .addComponent(jLabel2)
                            .addComponent(jLabel1))
                        .addGap(18, 18, 18)
                        .addGroup(frmEditLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(txtID, javax.swing.GroupLayout.PREFERRED_SIZE, 156, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtName, javax.swing.GroupLayout.PREFERRED_SIZE, 156, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtAddress)
                            .addComponent(txtPhone)
                            .addComponent(txtEmail)
                            .addComponent(txtContact)))
                    .addGroup(frmEditLayout.createSequentialGroup()
                        .addGap(102, 102, 102)
                        .addComponent(btnOK)))
                .addContainerGap(77, Short.MAX_VALUE))
        );
        frmEditLayout.setVerticalGroup(
            frmEditLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(frmEditLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(frmEditLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(frmEditLayout.createSequentialGroup()
                        .addGroup(frmEditLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel1)
                            .addComponent(txtID, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addComponent(jLabel2))
                    .addComponent(txtName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(frmEditLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(txtAddress, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(frmEditLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel4)
                    .addComponent(txtPhone, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(frmEditLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel5)
                    .addComponent(txtEmail, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(frmEditLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel6)
                    .addComponent(txtContact, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addComponent(btnOK)
                .addContainerGap(25, Short.MAX_VALUE))
        );

        frmDetail.addComponentListener(new java.awt.event.ComponentAdapter() {
            public void componentHidden(java.awt.event.ComponentEvent evt) {
                frmDetailComponentHidden(evt);
            }
            public void componentShown(java.awt.event.ComponentEvent evt) {
                frmDetailComponentShown(evt);
            }
        });

        jLabel7.setText("ID");

        jLabel8.setText("Name");

        jLabel9.setText("Address");

        jLabel10.setText("Contact");

        jLabel11.setText("Email");

        jLabel12.setText("Phone");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(25, 25, 25)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel9)
                    .addComponent(jLabel8)
                    .addComponent(jLabel7))
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addComponent(txtDetailName, javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(txtDetailID, javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(txtDetailAddress, javax.swing.GroupLayout.DEFAULT_SIZE, 152, Short.MAX_VALUE))
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel10)
                    .addComponent(jLabel11)
                    .addComponent(jLabel12))
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addComponent(txtDetailEmail, javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(txtDetailPhone, javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(txtDetailContact, javax.swing.GroupLayout.PREFERRED_SIZE, 152, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap())
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel12)
                            .addComponent(txtDetailPhone, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel11)
                            .addComponent(txtDetailEmail, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel10)
                            .addComponent(txtDetailContact, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel7)
                            .addComponent(txtDetailID, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel8)
                            .addComponent(txtDetailName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(18, 18, 18)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel9)
                            .addComponent(txtDetailAddress, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addGap(30, 30, 30))
        );

        jLabel13.setText("List Order");

        tblDetailOrder.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "ID", "Create By", "Create Date", "State"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                true, false, true, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane2.setViewportView(tblDetailOrder);

        btnDetailOK.setText("OK");

        btnViewDetail.setText("Detail");
        btnViewDetail.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnViewDetailActionPerformed(evt);
            }
        });

        btnApproveOrder.setText("Approve");
        btnApproveOrder.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnApproveOrderActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout frmDetailLayout = new javax.swing.GroupLayout(frmDetail.getContentPane());
        frmDetail.getContentPane().setLayout(frmDetailLayout);
        frmDetailLayout.setHorizontalGroup(
            frmDetailLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(frmDetailLayout.createSequentialGroup()
                .addGroup(frmDetailLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(frmDetailLayout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, frmDetailLayout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addComponent(btnDetailOK))
                    .addGroup(frmDetailLayout.createSequentialGroup()
                        .addGap(33, 33, 33)
                        .addGroup(frmDetailLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 542, Short.MAX_VALUE)
                            .addGroup(frmDetailLayout.createSequentialGroup()
                                .addGroup(frmDetailLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel13)
                                    .addGroup(frmDetailLayout.createSequentialGroup()
                                        .addComponent(btnViewDetail)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(btnApproveOrder)))
                                .addGap(0, 0, Short.MAX_VALUE)))))
                .addContainerGap())
        );
        frmDetailLayout.setVerticalGroup(
            frmDetailLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(frmDetailLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 126, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jLabel13)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(frmDetailLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnViewDetail)
                    .addComponent(btnApproveOrder))
                .addGap(16, 16, 16)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 266, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(btnDetailOK)
                .addContainerGap(21, Short.MAX_VALUE))
        );

        frmViewDetail.addComponentListener(new java.awt.event.ComponentAdapter() {
            public void componentShown(java.awt.event.ComponentEvent evt) {
                frmViewDetailComponentShown(evt);
            }
        });

        jLabel14.setText("View Detail");

        jLabel15.setText("Order ID");

        lblOrderID.setText("lblOrderID");

        tblViewDetail.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "ID", "Book Name", "Number", "Price"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane3.setViewportView(tblViewDetail);

        btnViewDetailOK.setText("OK");

        jLabel16.setText("Book Number:");

        lblNum.setText("jLabel17");

        jLabel18.setText("Total Price");

        lblPrice.setText("jLabel19");

        javax.swing.GroupLayout frmViewDetailLayout = new javax.swing.GroupLayout(frmViewDetail.getContentPane());
        frmViewDetail.getContentPane().setLayout(frmViewDetailLayout);
        frmViewDetailLayout.setHorizontalGroup(
            frmViewDetailLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(frmViewDetailLayout.createSequentialGroup()
                .addGroup(frmViewDetailLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(frmViewDetailLayout.createSequentialGroup()
                        .addGap(165, 165, 165)
                        .addComponent(jLabel14))
                    .addGroup(frmViewDetailLayout.createSequentialGroup()
                        .addGap(23, 23, 23)
                        .addGroup(frmViewDetailLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 497, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(frmViewDetailLayout.createSequentialGroup()
                                .addComponent(jLabel15)
                                .addGap(18, 18, 18)
                                .addComponent(lblOrderID, javax.swing.GroupLayout.PREFERRED_SIZE, 85, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(34, 34, 34)
                                .addComponent(jLabel16)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(lblNum)
                                .addGap(26, 26, 26)
                                .addComponent(jLabel18)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(lblPrice)))))
                .addContainerGap(34, Short.MAX_VALUE))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, frmViewDetailLayout.createSequentialGroup()
                .addGap(0, 0, Short.MAX_VALUE)
                .addComponent(btnViewDetailOK)
                .addGap(52, 52, 52))
        );
        frmViewDetailLayout.setVerticalGroup(
            frmViewDetailLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(frmViewDetailLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel14)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(frmViewDetailLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel15)
                    .addComponent(lblOrderID)
                    .addComponent(jLabel16)
                    .addComponent(lblNum)
                    .addComponent(jLabel18)
                    .addComponent(lblPrice))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 194, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(btnViewDetailOK)
                .addContainerGap(29, Short.MAX_VALUE))
        );

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        btnAdd.setText("Add New");
        btnAdd.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAddActionPerformed(evt);
            }
        });

        btnEdit.setText("Edit");
        btnEdit.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEditActionPerformed(evt);
            }
        });

        tblListManu.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "ID", "Name", "Address", "Phone", "Email", "Contact"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, true, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane1.setViewportView(tblListManu);

        btnDetail.setText("Detail");
        btnDetail.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnDetailActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(21, 21, 21)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 590, Short.MAX_VALUE)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(btnAdd)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(btnEdit)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(btnDetail)
                        .addGap(0, 0, Short.MAX_VALUE)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnAdd)
                    .addComponent(btnEdit)
                    .addComponent(btnDetail))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 278, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(29, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnAddActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAddActionPerformed
        new frmAddManuFactory().setVisible(true);
    }//GEN-LAST:event_btnAddActionPerformed

    private void btnEditActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEditActionPerformed
        if(tblListManu.getSelectedRowCount() == 1)
        {
            manuInfo[0] = dtm.getValueAt(tblListManu.getSelectedRow(), 0).toString();
            manuInfo[1] = dtm.getValueAt(tblListManu.getSelectedRow(), 1).toString();
            manuInfo[2] = dtm.getValueAt(tblListManu.getSelectedRow(), 2).toString();
            manuInfo[3] = dtm.getValueAt(tblListManu.getSelectedRow(), 3).toString();
            manuInfo[4] = dtm.getValueAt(tblListManu.getSelectedRow(), 4).toString();
            manuInfo[5] = dtm.getValueAt(tblListManu.getSelectedRow(), 5).toString();
            frmEdit.setVisible(true);
        }
    }//GEN-LAST:event_btnEditActionPerformed

    private void frmEditComponentShown(java.awt.event.ComponentEvent evt) {//GEN-FIRST:event_frmEditComponentShown
        txtID.setText(manuInfo[0]);
        txtName.setText(manuInfo[1]);
        txtAddress.setText(manuInfo[2]);
        txtPhone.setText(manuInfo[3]);
        txtEmail.setText(manuInfo[4]);
        txtContact.setText(manuInfo[5]);
                
    }//GEN-LAST:event_frmEditComponentShown

    private void btnOKActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnOKActionPerformed
        objQG.setTable("Manufactory");
        String[] colName = new String[]{"ManuName","ManuAddress","ManuPhone","ManuEmail","ManuContact"};
        String[] colType = new String[]{"String","String","String","String","String"};
        String[] colData = new String[]{""+txtName.getText(),""+txtAddress.getText(),""+txtPhone.getText(),""+txtEmail.getText(),""+txtContact.getText()};
        String[] condName = new String[]{"ManuID"};
        String[] condType = new String[]{"String"};
        String[] condData = new String[]{""+txtID.getText()};
        objQG.updateQuery(colType, colName, colData, condType, condName, condData);
        frmEdit.setVisible(false);
    }//GEN-LAST:event_btnOKActionPerformed

    private void btnDetailActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnDetailActionPerformed
        if(tblListManu.getSelectedRowCount() == 1)
        {
            manuInfo[0] = dtm.getValueAt(tblListManu.getSelectedRow(), 0).toString();
            manuInfo[1] = dtm.getValueAt(tblListManu.getSelectedRow(), 1).toString();
            manuInfo[2] = dtm.getValueAt(tblListManu.getSelectedRow(), 2).toString();
            manuInfo[3] = dtm.getValueAt(tblListManu.getSelectedRow(), 3).toString();
            manuInfo[4] = dtm.getValueAt(tblListManu.getSelectedRow(), 4).toString();
            manuInfo[5] = dtm.getValueAt(tblListManu.getSelectedRow(), 5).toString();
            frmDetail.setVisible(true);
        }
    }//GEN-LAST:event_btnDetailActionPerformed

    private void frmDetailComponentShown(java.awt.event.ComponentEvent evt) {//GEN-FIRST:event_frmDetailComponentShown
        txtDetailID.setText(manuInfo[0]);
        txtDetailName.setText(manuInfo[1]);
        txtDetailAddress.setText(manuInfo[2]);
        txtDetailPhone.setText(manuInfo[3]);
        txtDetailEmail.setText(manuInfo[4]);
        txtDetailContact.setText(manuInfo[5]);
        dtmDetailOrder.setRowCount(0);
        //load table
        dtmDetailOrder.setRowCount(0);
        ResultSet rsDetail;
        String sqlQuery = "Select OrderID, EmpName, OrderDate, OrderState "
                        + "From BookOrder, Employee "
                        + "Where BookOrder.EmpID = Employee.EmpID and ManuID = '"+manuInfo[0]+"'";
        rsDetail = objQG.selectMultiTable(sqlQuery);
        ResultSet rsDetailTemp;
        rsDetailTemp = objQG.selectMultiTable(sqlQuery);
        int countTemp = 0;
        try {
            while(rsDetailTemp.next())
            {
                countTemp++;
            }
        } catch (SQLException ex) {
            Logger.getLogger(frmOrderBook.class.getName()).log(Level.SEVERE, null, ex);
        }
        String[][] sqlData = new String[countTemp][4];
        String[] listCol = new String[]{"OrderID", "EmpName", "OrderDate", "OrderState"};
        String[] listType = new String[]{"String", "String", "date", "String"};
        Display objDisplay = new Display(listCol);
        sqlData = objDisplay.getData(rsDetail, listType, countTemp, 4);
        for(int i = 0; i<countTemp;i++)
        {
            dtmDetailOrder.addRow(sqlData[i]);
        }
        int temp  = dtmDetailOrder.getRowCount();
        for (int i = 0; i < temp; i++) {
            if(dtmDetailOrder.getValueAt(i, 3).equals("1"))
                dtmDetailOrder.setValueAt("Approved", i, 3);
            else dtmDetailOrder.setValueAt("Wait", i, 3);
        }
            
    }//GEN-LAST:event_frmDetailComponentShown

    private void frmDetailComponentHidden(java.awt.event.ComponentEvent evt) {//GEN-FIRST:event_frmDetailComponentHidden

    }//GEN-LAST:event_frmDetailComponentHidden

    private void btnViewDetailActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnViewDetailActionPerformed
        if(tblDetailOrder.getSelectedRowCount() == 1)
        {
            detailOrderID = tblDetailOrder.getValueAt(tblDetailOrder.getSelectedRow(), 0).toString();
            frmViewDetail.setVisible(true);
        }
    }//GEN-LAST:event_btnViewDetailActionPerformed

    private void frmViewDetailComponentShown(java.awt.event.ComponentEvent evt) {//GEN-FIRST:event_frmViewDetailComponentShown
        lblOrderID.setText("");
        lblOrderID.setText(detailOrderID);
        dtmViewDetail.setRowCount(0);
        int totalNum = 0;
        int totalPrice = 0;
        
        String sql = "Select Book.BookID, BookName, BookNumber, BookPrice "
                + "From Book, BookOrderDetail "
                + "Where Book.BookID = BookOrderDetail.BookID and OrderID = '"+detailOrderID+"'";
        ResultSet rsDetail;
        rsDetail = objQG.selectMultiTable(sql);
            ResultSet rsDeTemp;
            rsDeTemp = objQG.selectMultiTable(sql);
            int countTemp = 0;
            try {
                while(rsDeTemp.next())
                {
                    countTemp++;
                }
            } catch (SQLException ex) {
                Logger.getLogger(frmOrderBook.class.getName()).log(Level.SEVERE, null, ex);
            }
            String[][] sqlData = new String[countTemp][4];
            String[] listCol = new String[]{"BookID", "BookName", "BookNumber","BookPrice"};
            String[] listType = new String[]{"String", "String", "int", "int"};
            Display objDisplay = new Display(listCol);
            sqlData = objDisplay.getData(rsDetail, listType, countTemp, 4);
            for(int i = 0; i<countTemp;i++)
            {
                dtmViewDetail.addRow(sqlData[i]);
                totalNum = totalNum + Integer.parseInt(sqlData[i][2]);
                totalPrice = totalPrice + Integer.parseInt(sqlData[i][3]);
            }
            lblNum.setText("");
            lblPrice.setText("");
            lblNum.setText(""+totalNum);
            lblPrice.setText(""+totalPrice);
    }//GEN-LAST:event_frmViewDetailComponentShown

    private void btnApproveOrderActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnApproveOrderActionPerformed
        
        if(tblDetailOrder.getSelectedRowCount() == 1)
        {
            if(tblDetailOrder.getValueAt(tblDetailOrder.getSelectedRow(), 3).toString().equals("Wailt"))
            {
                try {
                    objQG.setTable("BookOrder");
                    String columName[] = new String[]{"OrderState"};
                    String columnType[] = new String[]{"bit"};
                    String columnData[] = new String[]{"1"};
                    String codName[] = new String[]{"OrderID"};
                    idUpdate = dtmDetailOrder.getValueAt(tblDetailOrder.getSelectedRow(), 0).toString();
                    String codData[] = new String[]{""+idUpdate};
                    String codType[] = new String[]{"String"};
                    objQG.updateQuery(columnType, columName, columnData, codType, codName,codData);
                    //select detail

                    objQG.setTable("BookOrderDetail");
                    ResultSet rsUpdate;

                    String sqlSelect = "Select BookID, BookNumber FROM BookOrderDetail Where OrderID = '"+idUpdate+"'";
                    rsUpdate = objQG.selectMultiTable(sqlSelect);
                    objQG.setTable("Book");
                    while(rsUpdate.next())
                    {
                        int temp = rsUpdate.getInt("BookNumber");
                        String bookUpdate = "Update Book Set RealNumber = RealNumber + "+temp+" Where BookID = '"+rsUpdate.getString("BookID")+"'";
                        PreparedStatement pst = conn.prepareStatement(bookUpdate);
                        pst.execute();
                    }
                } catch (SQLException ex) {
                    Logger.getLogger(frmApprove.class.getName()).log(Level.SEVERE, null, ex);
                }
                JOptionPane.showMessageDialog(this, "Approved Success");
                tblDetailOrder.setValueAt("Approved", tblDetailOrder.getSelectedRow(), 3);
            }
            else JOptionPane.showMessageDialog(frmDetail, "This Order approved");
        }

    }//GEN-LAST:event_btnApproveOrderActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(frmListManufactory.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(frmListManufactory.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(frmListManufactory.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(frmListManufactory.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new frmListManufactory().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnAdd;
    private javax.swing.JButton btnApproveOrder;
    private javax.swing.JButton btnDetail;
    private javax.swing.JButton btnDetailOK;
    private javax.swing.JButton btnEdit;
    private javax.swing.JButton btnOK;
    private javax.swing.JButton btnViewDetail;
    private javax.swing.JButton btnViewDetailOK;
    private javax.swing.JFrame frmDetail;
    private javax.swing.JFrame frmEdit;
    private javax.swing.JFrame frmViewDetail;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel18;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JLabel lblNum;
    private javax.swing.JLabel lblOrderID;
    private javax.swing.JLabel lblPrice;
    private javax.swing.JTable tblDetailOrder;
    private javax.swing.JTable tblListManu;
    private javax.swing.JTable tblViewDetail;
    private javax.swing.JTextField txtAddress;
    private javax.swing.JTextField txtContact;
    private javax.swing.JTextField txtDetailAddress;
    private javax.swing.JTextField txtDetailContact;
    private javax.swing.JTextField txtDetailEmail;
    private javax.swing.JTextField txtDetailID;
    private javax.swing.JTextField txtDetailName;
    private javax.swing.JTextField txtDetailPhone;
    private javax.swing.JTextField txtEmail;
    private javax.swing.JTextField txtID;
    private javax.swing.JTextField txtName;
    private javax.swing.JTextField txtPhone;
    // End of variables declaration//GEN-END:variables
}
